# Discovery Engine - Data Schema
# Captures data access patterns, MDSplus trees, and data formats.
#
# Generated models: discovery/models/data.py
# Generated docs: prompts/agents/schemas/data_schema.md

id: https://iter.org/imas-codex/discovery/data
name: discovery_data
title: Data Discovery Schema
description: >-
  Schema for data exploration artifacts. Captures MDSplus configuration,
  HDF5/NetCDF patterns, and data organization.

prefixes:
  linkml: https://w3id.org/linkml/
  discovery: https://iter.org/imas-codex/discovery/

default_prefix: discovery
default_range: string

imports:
  - linkml:types

classes:
  DataArtifact:
    description: >-
      Data access and organization patterns for a facility.
      Supports partial updates for incremental discovery.
    attributes:
      facility:
        description: Facility identifier (e.g., epfl, jet, iter)
        range: string
        required: true
      explored_at:
        description: Timestamp when this artifact was created
        range: datetime
        required: true
      mdsplus:
        description: MDSplus configuration and trees
        range: MDSplusInfo
        inlined: true
      hdf5:
        description: HDF5 data patterns
        range: HDF5Info
        inlined: true
      netcdf:
        description: NetCDF data patterns
        range: NetCDFInfo
        inlined: true
      data_formats:
        description: Other data formats found
        range: DataFormatInfo
        multivalued: true
        inlined_as_list: true
      shot_ranges:
        description: Known shot number ranges
        range: ShotRange
        multivalued: true
        inlined_as_list: true
      notes:
        description: Freeform observations about data organization
        range: string
        multivalued: true

  MDSplusInfo:
    description: MDSplus data system configuration
    attributes:
      available:
        description: Whether MDSplus is accessible
        range: boolean
        required: true
      server:
        description: MDSplus server hostname
        range: string
      trees:
        description: Available MDSplus tree names
        range: string
        multivalued: true
      default_tree:
        description: Default tree for this facility
        range: string
      python_bindings:
        description: Whether Python MDSplus bindings work
        range: boolean
      example_signals:
        description: Example signal paths that work
        range: string
        multivalued: true
      notes:
        description: Observations about MDSplus setup
        range: string
        multivalued: true

  HDF5Info:
    description: HDF5 data patterns and locations
    attributes:
      available:
        description: Whether HDF5 files are present
        range: boolean
        required: true
      locations:
        description: Paths where HDF5 files are found
        range: string
        multivalued: true
      naming_patterns:
        description: File naming conventions observed
        range: string
        multivalued: true
      h5dump_available:
        description: Whether h5dump tool is available
        range: boolean
      notes:
        description: Observations about HDF5 usage
        range: string
        multivalued: true

  NetCDFInfo:
    description: NetCDF data patterns and locations
    attributes:
      available:
        description: Whether NetCDF files are present
        range: boolean
        required: true
      locations:
        description: Paths where NetCDF files are found
        range: string
        multivalued: true
      naming_patterns:
        description: File naming conventions observed
        range: string
        multivalued: true
      ncdump_available:
        description: Whether ncdump tool is available
        range: boolean
      notes:
        description: Observations about NetCDF usage
        range: string
        multivalued: true

  DataFormatInfo:
    description: Information about a data format
    attributes:
      name:
        description: Format name (e.g., CSV, JSON, MAT, IDL)
        range: string
        required: true
      extension:
        description: File extension
        range: string
      locations:
        description: Paths where this format is found
        range: string
        multivalued: true
      description:
        description: What this format is used for
        range: string
      notes:
        description: Observations about this format
        range: string
        multivalued: true

  ShotRange:
    description: A range of shot numbers
    attributes:
      name:
        description: Name or description of this range
        range: string
      start:
        description: First shot number
        range: integer
      end:
        description: Last shot number (or current)
        range: integer
      description:
        description: What this shot range represents
        range: string
      notes:
        description: Observations about this shot range
        range: string
        multivalued: true

